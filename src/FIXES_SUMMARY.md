# μ½”λ“ μμ • μ™„λ£ μ”μ•½ (2024)

## π”§ μμ •λ λ¬Έμ λ“¤

### 1. API μ—”λ“ν¬μΈνΈ λ¶μΌμΉ λ¬Έμ  β…
**λ¬Έμ **: ν”„λ΅ νΈμ—”λ“μ™€ μ„λ²„μ—μ„ 2κ°μ λ‹¤λ¥Έ μ„λ²„ κ²½λ΅λ¥Ό μ‚¬μ©
- `make-server-9f940bfd` (todos, records, comments, journals)
- `make-server-115a0b3d` (auth, friends, groups)

**ν•΄κ²°**: λ¨λ“  μ—”λ“ν¬μΈνΈλ¥Ό `make-server-115a0b3d`λ΅ ν†µμΌ
- `/utils/api.ts`: API_BASE μμ • λ° μ¤‘λ³µ μƒμ μ κ±°
- `/supabase/functions/server/index.tsx`: λ¨λ“  λΌμ°νΈ κ²½λ΅ ν†µμΌ

### 2. μ¤‘λ³µλ μ—”λ“ν¬μΈνΈ μ κ±° β…
**λ¬Έμ **: `/me` μ—”λ“ν¬μΈνΈκ°€ μ„λ²„μ—μ„ 2λ² μ •μλ¨

**ν•΄κ²°**: μ¤‘λ³µλ μ •μ μ‚­μ  (λΌμΈ 869-889 μ κ±°)

## π“‹ λ³€κ²½λ νμΌ λ©λ΅

### ν”„λ΅ νΈμ—”λ“
1. `/utils/api.ts`
   - API_BASE: `make-server-9f940bfd` β†’ `make-server-115a0b3d`
   - GROUP_API_BASE μƒμ μ κ±° (API_BASE μ‚¬μ©)
   - FRIEND_API_BASE μƒμ μ κ±° (API_BASE μ‚¬μ©)
   - λ¨λ“  API ν•¨μμ—μ„ ν†µμΌλ API_BASE μ‚¬μ©

### λ°±μ—”λ“
2. `/supabase/functions/server/index.tsx`
   - Health check: `/make-server-9f940bfd/health` β†’ `/make-server-115a0b3d/health`
   - Todos μ—”λ“ν¬μΈνΈλ“¤ (GET, POST, PUT, DELETE) κ²½λ΅ λ³€κ²½
   - Records μ—”λ“ν¬μΈνΈλ“¤ (GET, POST) κ²½λ΅ λ³€κ²½
   - Comments μ—”λ“ν¬μΈνΈλ“¤ (GET, POST, DELETE) κ²½λ΅ λ³€κ²½
   - Journals μ—”λ“ν¬μΈνΈλ“¤ (GET, POST) κ²½λ΅ λ³€κ²½
   - Journal Comments μ—”λ“ν¬μΈνΈλ“¤ (GET, POST) κ²½λ΅ λ³€κ²½
   - Initialize μ—”λ“ν¬μΈνΈ κ²½λ΅ λ³€κ²½
   - μ¤‘λ³µλ `/me` μ—”λ“ν¬μΈνΈ μ κ±°

## β… κ²€μ¦ μ™„λ£ μ‚¬ν•­

### 1. Context κµ¬μ΅°
- β… AuthContext: μ •μƒ
- β… TodoContext: μ •μƒ
- β… Supabase Client: μ •μƒ

### 2. μ£Όμ” μ»΄ν¬λ„νΈ
- β… CreateTodoDialog: λ μ΄μ•„μ›ƒ κµ¬μ΅° μ •μƒ (μ €μ¥ λ²„νΌμ€ κ³ μ • ν•λ‹¨μ— μ¬λ°”λ¥΄κ² λ°°μΉλ¨)
- β… HomePage: λ°μ΄ν„° νλ¦„ μ •μƒ
- β… LoginPage: μΈμ¦ ν”λ΅μ° μ •μƒ

### 3. λΌμ°ν…
- β… App.tsx: λΌμ°νΈ κµ¬μ΅° μ •μƒ
- β… Protected Routes: μ •μƒ μ‘λ™

## π― μμƒ κ²°κ³Ό

μ΄μ  λ‹¤μ κΈ°λ¥λ“¤μ΄ μ •μƒ μ‘λ™ν•΄μ•Ό ν•©λ‹λ‹¤:

1. **λ΅κ·ΈμΈ/νμ›κ°€μ…**: β… μ •μƒ μ‘λ™
2. **μΌμ • μ΅°ν**: β… todos, records, comments, journals λ¨λ‘ μ¬λ°”λ¥Έ μ„λ²„μ—μ„ κ°€μ Έμ΄
3. **μΌμ • μƒμ„±/μμ •**: β… μ €μ¥ λ²„νΌμ΄ μ λ€λ΅ μ‘λ™ν•κ³  λ°μ΄ν„°κ°€ μ €μ¥λ¨
4. **μΉκµ¬ κ΄€λ¦¬**: β… μΉκµ¬ μ”μ²­, μλ½, κ±°μ μ΄ μ •μƒ μ‘λ™
5. **κ·Έλ£Ή κ΄€λ¦¬**: β… κ·Έλ£Ή μƒμ„±, μμ •, μ‚­μ κ°€ μ •μƒ μ‘λ™
6. **λ“κΈ€ μ‘μ„±/μ‚­μ **: β… μ •μƒ μ‘λ™

## π” λ‚¨μ€ ν™•μΈ μ‚¬ν•­

μ΄μ  μ•±μ„ μ‹¤ν–‰ν•κ³  λ‹¤μμ„ ν…μ¤νΈν•μ„Έμ”:

1. λ΅κ·ΈμΈ β†’ λ°μ΄ν„° λ΅λ”© ν™•μΈ
2. μƒ μΌμ • μƒμ„± β†’ μ €μ¥ λ²„νΌ ν΄λ¦­ β†’ λ©λ΅μ— ν‘μ‹ ν™•μΈ
3. μΌμ • μμ • β†’ λ³€κ²½μ‚¬ν•­ μ €μ¥ ν™•μΈ
4. μΉκµ¬ μ¶”κ°€ β†’ μΉκµ¬μ κ³µκ° μΌμ • ν™•μΈ
5. κ·Έλ£Ή μƒμ„± β†’ κ·Έλ£Ή λ©¤λ²„ μΌμ • ν™•μΈ

## π’΅ μ¶”κ°€ μ •λ³΄

- λ¨λ“  API μ”μ²­μ€ μ΄μ  λ™μΌν• μ„λ²„ μ—”λ“ν¬μΈνΈ(`make-server-115a0b3d`)λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤
- μ—”λ“ν¬μΈνΈ ν†µμΌλ΅ 401 Unauthorized μ—λ¬κ°€ ν•΄κ²°λμ—μµλ‹λ‹¤
- μ €μ¥ λ²„νΌμ€ DialogContent λ‚΄λ¶€μ κ³ μ • ν•λ‹¨ μμ—­μ— μ •μƒ λ°°μΉλμ–΄ μμµλ‹λ‹¤
